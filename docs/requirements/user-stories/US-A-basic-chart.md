# Group A — 基礎繪圖與互動

> **群組目標**：提供基礎的 K 線繪圖、成交量顯示與互動操作能力  
> **技術範疇**：TradingView Lightweight Charts 整合、前端渲染  
> **依賴關係**：無（系統基礎）

---

## 概述

本群組定義了平台最基本的圖表能力，包括：
- K 線與成交量的正確顯示
- 使用者互動操作（縮放、平移、十字線）
- 小圖放大檢視模式
- 圖表載入與錯誤狀態處理

這些是所有後續功能的基礎，必須穩定運作。

---

## User Stories

### US A-1: K 線與成交量基礎繪圖

**As a** 策略研究員  
**I want** 看到標準的日 K 線圖與成交量副圖  
**So that** 我能夠觀察股票的價格與成交量變化

#### Acceptance Criteria

**AC1 — K 線正確顯示**
- **Given** 系統載入了某股票的歷史資料
- **When** 圖表元件渲染完成
- **Then** 應顯示標準 OHLC K 線，紅漲綠跌（台股慣例）

**AC2 — 成交量副圖對齊**
- **Given** K 線圖已顯示
- **When** 系統渲染成交量資料
- **Then** 成交量應顯示在副圖區域，時間軸與 K 線完全對齊

**AC3 — 無資料時的處理**
- **Given** 查詢結果為空或資料不足
- **When** 圖表嘗試渲染
- **Then** 應顯示「無資料」提示，不應出現錯誤畫面

---

### US A-2: 圖表互動操作（Zoom/Pan/Crosshair）

**As a** 策略研究員  
**I want** 能夠縮放、平移圖表，並使用十字線查看詳細數據  
**So that** 我能夠深入檢視特定時間區段的價格細節

#### Acceptance Criteria

**AC1 — 滑鼠滾輪縮放**
- **Given** 圖表已顯示
- **When** 使用者滾動滑鼠滾輪
- **Then** 圖表應以滑鼠位置為中心進行縮放

**AC2 — 拖曳平移**
- **Given** 圖表已顯示
- **When** 使用者按住左鍵拖曳
- **Then** 圖表應跟隨滑鼠移動進行平移

**AC3 — 十字線資料顯示**
- **Given** 圖表已顯示
- **When** 滑鼠移動到 K 線上
- **Then** 應顯示該 K 線的 OHLC 與成交量數據

---

### US A-3: 小圖點擊放大檢視

**As a** 策略研究員  
**I want** 點擊 Grid 中的任一小圖後能放大檢視  
**So that** 我能夠更清楚地分析單一樣本的細節

#### Acceptance Criteria

**AC1 — 小圖點擊事件**
- **Given** Grid 模式下顯示多個小圖
- **When** 使用者點擊任一小圖
- **Then** 該小圖應放大至主檢視區域

**AC2 — 放大後互動保留**
- **Given** 小圖已放大至主檢視
- **When** 使用者進行縮放或平移
- **Then** 所有互動操作應正常運作

**AC3 — 返回 Grid 檢視**
- **Given** 正在檢視放大圖表
- **When** 使用者點擊「返回」按鈕或按下 ESC
- **Then** 應返回 Grid 多圖並列檢視

---

### US A-4: 圖表載入狀態與錯誤處理

**As a** 策略研究員  
**I want** 在圖表載入過程中看到明確的狀態提示  
**So that** 我知道系統正在運作或是否發生錯誤

#### Acceptance Criteria

**AC1 — 載入中狀態**
- **Given** 系統正在從 API 取得圖表資料
- **When** 圖表元件處於載入狀態
- **Then** 應顯示 Loading 指示器（如 Spinner）

**AC2 — 載入錯誤提示**
- **Given** API 請求失敗（如網路錯誤、逾時）
- **When** 圖表嘗試渲染
- **Then** 應顯示明確的錯誤訊息與重試按鈕

**AC3 — 部分圖表失敗不影響整體**
- **Given** Grid 模式下載入多個圖表
- **When** 其中一個圖表載入失敗
- **Then** 其他圖表應正常顯示,失敗的圖表單獨顯示錯誤提示

---

## 技術備註

- **前端框架**：Vue 3 + TradingView Lightweight Charts
- **資料來源**：FastAPI 後端 `/api/chart-data` endpoint
- **渲染效能**：Grid 模式下需考慮大量小圖的渲染效能

---

## 依賴關係

- **被依賴於**：Group B（Strategy Grid 需要基礎圖表能力）
- **依賴於**：無（系統基礎功能）
