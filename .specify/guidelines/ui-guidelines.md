# UI Guidelines — AI 執行欄杆

> **Version**: 1.1.0  
> **Last Updated**: 2025-12-16  
> **定位**: 輔助性指引，不具憲法層級強制力

⚠️ **注意**：本文件為參考細則，`/speckit.analyze` 不會自動檢查此文件內容。  
可被 analyze 檢查的 UI 規則，已定義於 `constitution.md` §3.9。

---

## 1. 適用範圍

本文件適用於所有 **使用者可感知的 UI 行為**，包括：
- 畫面呈現（顯示什麼資訊）
- 互動行為（使用者能做什麼）
- 狀態表達（Loading / Empty / Error）

**不適用**：
- 純視覺樣式（配色、字體、間距）
- 技術實作細節（React / CSS）

---

## 2. UI 元件一致性規範（參考）

### 2.1 表格行為

| 行為 | 規範 |
|------|------|
| 排序 | 點擊欄位標題切換升/降序，需有視覺指示 |
| 篩選 | 若提供篩選，需明確顯示目前篩選條件 |
| 空資料 | 顯示說明文字，不得僅顯示空白 |
| 載入中 | 顯示 Loading 指示，不得無反應 |

### 2.2 按鈕行為

| 類型 | 規範 |
|------|------|
| 主要動作 | 每頁至多一個主要按鈕 |
| 危險動作 | 刪除、重置等 MUST 有確認對話框 |
| 禁用狀態 | 不可點擊時 MUST 顯示禁用樣式，SHOULD 提供原因 |

### 2.3 輸入欄位

| 行為 | 規範 |
|------|------|
| 必填標示 | 必填欄位 MUST 有視覺標示 |
| 驗證時機 | 失焦時驗證，或提交時統一驗證 |
| 錯誤提示 | 顯示於欄位下方，說明錯誤原因 |

---

## 3. 狀態表達規範

### 3.1 Loading 狀態

**MUST**:
- 超過 300ms 的操作 MUST 顯示 Loading 指示
- Loading 期間 SHOULD 禁用重複觸發

**格式範例**:
```
載入中...
```

### 3.2 Empty 狀態

**MUST**:
- 空資料 MUST 顯示說明，不得僅顯示空白
- SHOULD 提供下一步引導（如「新增第一筆資料」）

**格式範例**:
```
目前沒有資料
[新增] 按鈕 或 說明文字
```

### 3.3 Error 狀態

**MUST**:
- 錯誤訊息 MUST 說明「發生什麼事」
- SHOULD 說明「可以做什麼」

**格式範例**:
```
❌ 載入失敗：無法連線到伺服器
請檢查網路連線後重試 [重試]
```

**禁止**:
```
❌ Error
❌ Something went wrong
❌ 發生錯誤
```

---

## 4. 確認對話框規範

### 4.1 何時需要確認對話框

| 操作類型 | 需要確認 |
|----------|----------|
| 刪除資料 | ✅ MUST |
| 重置表單 | ✅ MUST |
| 離開未儲存頁面 | ✅ MUST |
| 一般提交 | ❌ 不需要 |
| 查詢操作 | ❌ 不需要 |

### 4.2 對話框內容規範

**MUST 包含**:
- 明確說明將要執行的動作
- 取消按鈕（放左側或次要位置）
- 確認按鈕（放右側或主要位置）

**格式範例**:
```
確定要刪除「項目名稱」嗎？
此操作無法復原。

[取消] [刪除]
```

---

## 5. 文案一致性規範

### 5.1 動作文案

| 動作 | 建議文案 | 禁止文案 |
|------|----------|----------|
| 新增 | 新增、建立 | Add、Create |
| 編輯 | 編輯、修改 | Edit、Update |
| 刪除 | 刪除、移除 | Delete、Remove |
| 儲存 | 儲存 | Save、Submit |
| 取消 | 取消 | Cancel |
| 確認 | 確定、確認 | OK、Yes |

### 5.2 狀態文案

| 狀態 | 建議文案 |
|------|----------|
| 載入中 | 載入中... |
| 處理中 | 處理中... |
| 已儲存 | 已儲存 |
| 操作成功 | ✅ [具體說明] 成功 |
| 操作失敗 | ❌ [具體說明] 失敗：[原因] |

---

## 6. UI 與 Feature 開發流程

### 6.1 Feature 開發中

1. UI 行為 MAY 在開發過程中逐步演化
2. 最終整合前，MUST 將實際行為回填至 Feature Spec
3. UI 行為變更屬於規格變更，不得僅改程式碼

### 6.2 Debug 過程中

若發現 UI 行為需調整：
- MUST 修改 Feature Spec（非直接改 System Spec）
- System Spec 僅於 Unify Flow 時更新

### 6.3 Unify Flow

Feature 完成後：
- UI 行為 → 整合進 `specs/system/spec.md`
- UI 結構 → 整合進 System Design（如有）
- 舊版本 → 封存至 `specs/history/`

---

## 7. Prototype 與視覺工具定位

**Prototype（如 Figma、Lovable、v0）**:
- 僅為「理解輔助」
- 不具規格權威
- 不可反向覆寫 Spec / Design

**MUST**:
- 所有有意義的 UI 決策，MUST 回寫成 User Story 或 System Design，才具治理效力

---

## Version History

| 版本 | 日期 | 變更說明 |
|------|------|----------|
| 1.0.0 | 2025-12-16 | 初始版本，整合自 UI 規則研討文件 |
