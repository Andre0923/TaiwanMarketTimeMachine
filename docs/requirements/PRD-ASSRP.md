# AI è¼”åŠ©å°è‚¡ç­–ç•¥ç ”ç™¼å¹³å°ï¼ˆASSRPï¼‰

| æ–‡ä»¶è³‡è¨Š | å…§å®¹                                                                 |
| ---- | ------------------------------------------------------------------ |
| å°ˆæ¡ˆåç¨± | AI-Assisted Stock Strategy Research Platformï¼ˆASSRPï¼‰                |
| ç‰ˆæœ¬   | v2.0                                                               |
| æ—¥æœŸ   | 2025/12/05                                                         |
| æ–‡ä»¶ç‹€æ…‹ | éœ€æ±‚ç¢ºèª / å¯é€²å…¥é–‹ç™¼                                                       |
| æ ¸å¿ƒå®šä½ | **è¦–è¦ºåŒ–äº‹ä»¶ç ”ç©¶èˆ‡å‹æ…‹æ¨™è¨˜å¹³å°ï¼ˆVisual Event Study & Pattern Research Platformï¼‰** |
| æ ¸å¿ƒåƒ¹å€¼ | ä»¥ã€Œäº‹ä»¶æ—¥ã€ç‚ºéŒ¨é»ï¼Œé€éå¤šåœ–ä¸¦åˆ—èˆ‡çµ±ä¸€æ™‚é–“è¦–çª—ï¼Œä¸¦å³æ™‚ç”¢å‡ºäº‹ä»¶å¾Œç¸¾æ•ˆçµ±è¨ˆï¼ŒåŠ é€Ÿç­–ç•¥ç ”ç©¶èˆ‡é©—è­‰                     |

---

## 1. æ ¸å¿ƒç›®æ¨™èˆ‡æŠ€è¡“æ¶æ§‹

### 1.1 ç”¢å“ç›®æ¨™

1. ç­–ç•¥æƒæèˆ‡ä¸¦åˆ—ï¼ˆæ ¸å¿ƒï¼‰
    
2. çµ±ä¸€äº‹ä»¶è¦–è§’çš„æ™‚é–“çª—å£æª¢è¦–ï¼ˆTime Window Engineï¼‰
    
3. äº‹ä»¶å¾Œç¸¾æ•ˆå¿«é€Ÿçµ±è¨ˆï¼ˆMicro Backtestï¼‰
    
4. AI å”ä½œç”¢ç”ŸæŸ¥è©¢ï¼ˆText-to-SQLï¼‰
    

### 1.2 æŠ€è¡“é¸å‹

|è§’è‰²|æŠ€è¡“æ£§|å‚™è¨»|
|---|---|---|
|å‰ç«¯|Vue 3 + TradingView Lightweight Charts|é«˜æ•ˆèƒ½ K ç·šèˆ‡ Grid|
|å¾Œç«¯|FastAPI|API èˆ‡è¨ˆç®—é‚è¼¯|
|DB|Microsoft SQL Server|å°è‚¡æ­·å²è³‡æ–™|
|AI|LangChain SQL Toolkit|Text-to-SQL + Guardrail|

---

## 2. åŠŸèƒ½è¦æ ¼ï¼ˆFunctional Requirementsï¼‰

### 2.1 åŸºç¤ç¹ªåœ–

|ID|åŠŸèƒ½|æè¿°|
|---|---|---|
|F-01|K ç·š|æ¨™æº–æ—¥ K|
|F-02|æˆäº¤é‡|å‰¯åœ–å°é½Š|
|F-03|äº’å‹•|Zoom / Pan / Crosshair|
|F-17|å°åœ–é»æ“Šæ”¾å¤§|Grid ä»»ä¸€å°åœ–å¯æ”¾å¤§æˆä¸»åœ–æª¢è¦–ï¼ˆç ”ç©¶å¿…è¦ï¼‰|

---

### 2.2 Strategy Grid Mode

|ID|åŠŸèƒ½|æè¿°|
|---|---|---|
|F-04|æ¢ä»¶æŸ¥è©¢|çµæ§‹åŒ–æˆ– AI SQL|
|F-05|å¤šåœ–ä¸¦åˆ—|4x5+ Gridï¼Œé«˜æ•ˆæ¸²æŸ“|
|F-06|äº‹ä»¶ç½®ä¸­|Event Anchoring|

---

### 2.3 Time Window Engineï¼ˆæ–°å¢æ ¸å¿ƒï¼‰

> æ‰€æœ‰å°åœ–å¿…é ˆåœ¨**ç›¸åŒäº‹ä»¶è¦–è§’**ä¸‹å‘ˆç¾

|ID|åŠŸèƒ½|æè¿°|
|---|---|---|
|F-08|è¦–çª—è¨­å®š|`pre_days` / `post_days`ï¼ˆäº¤æ˜“æ—¥ï¼‰|
|F-09|è¦–çª—ä¸€è‡´åŒ–|å…¨ Grid åŒå°ºåº¦|
|F-10|Anchor Line|äº‹ä»¶æ—¥å‚ç›´ç·š|
|F-11|Preset åˆ‡æ›|10/5ã€20/10ã€60/20|

---

### 2.4 Micro Backtestï¼ˆæ–°å¢æ ¸å¿ƒï¼‰

> éå®Œæ•´å›æ¸¬ï¼Œè€Œæ˜¯ã€Œäº‹ä»¶ç ”ç©¶çµ±è¨ˆã€

|ID|åŠŸèƒ½|æè¿°|
|---|---|---|
|F-12|äº‹ä»¶å¾Œå ±é…¬|+1,+3,+5,+10 æ—¥å ±é…¬|
|F-13|ç¸¾æ•ˆå½™ç¸½|å¹³å‡å ±é…¬ã€å‹ç‡ã€æœ€å¤§å›æ’¤|
|F-14|å´é‚Šç¸¾æ•ˆé¢æ¿|Grid æ—é¡¯ç¤ºçµ±è¨ˆ|
|F-15|æ˜ç´°è¡¨|æ¯ç­†æ¨£æœ¬å ±é…¬æ˜ç´°|
|F-16|åŒ¯å‡º Excel|å«æŸ¥è©¢æ¢ä»¶èˆ‡çµ±è¨ˆ|

#### æŒ‡æ¨™å®šç¾©

- Average Return
    
- Win Rateï¼ˆ>0ï¼‰
    
- Max Drawdownï¼ˆäº‹ä»¶æ—¥æ”¶ç›¤ç‚ºåŸºæº–ï¼‰
    

---

### 2.5 AI å”ä½œï¼ˆText-to-SQLï¼‰

|ID|åŠŸèƒ½|æè¿°|
|---|---|---|
|F-07|AI ç­–ç•¥ç”Ÿæˆ|è‡ªç„¶èªè¨€ â†’ SQL|

---

## 3. DB Schema

|Table|ç”¨é€”|
|---|---|
|stock_daily|OHLCV|
|stock_events|äº‹ä»¶è³‡æ–™|

### ğŸ”’ ä¿éšªçµ²è¨­è¨ˆ 1ï¼šå¿«å–è¡¨ï¼ˆå¿…ç•™ï¼‰

|Table|ç”¨é€”|
|---|---|
|`event_study_result_cache`|å¿«å–æŸ¥è©¢çµæœ|

Keyï¼š

`hash(SQL + pre_days + post_days + horizons)`

---

## 4. API Response è¦ç¯„ï¼ˆä¿éšªçµ²è¨­è¨ˆ 2ï¼‰

**å¿…é ˆå›ºå®šæ ¼å¼ï¼Œæœªä¾†æ“´å……ä¸éœ€æ”¹ API**

```json
{
  "event_window": { "pre": 20, "post": 10 },
  "horizons": [1,3,5,10],
  "samples": [...],
  "metrics": {
    "avg_return": {},
    "win_rate": {},
    "max_drawdown": {}
  }
}
```

---

## 5. User Flowï¼ˆæ›´æ–°ï¼‰

### Strategy Grid Mode

1. è¨­å®šæ¢ä»¶ï¼ˆSQL / AIï¼‰
    
2. è¨­å®š Time Window
    
3. é¡¯ç¤º Gridï¼ˆäº‹ä»¶ç½®ä¸­ï¼‰
    
4. é¡¯ç¤º Micro Backtest å´æ¬„
    
5. é»æ“Šå°åœ–æ”¾å¤§æª¢è¦–
    
6. åŒ¯å‡º Excel
    

---

## 6. Roadmapï¼ˆæ›´æ–°ï¼‰

|Phase|ä»»å‹™|
|---|---|
|Phase 1|DB + API åŸºç¤|
|Phase 2|Grid + Event Anchoring|
|Phase 2.5|Time Window Engine|
|Phase 3|Micro Backtest + Excel|
|Phase 4|AI Text-to-SQL|

---

## 7. éç›®æ¨™ï¼ˆé¿å…éåº¦è¨­è¨ˆï¼‰

æœ¬ç‰ˆæœ¬**ä¸åŒ…å«**ï¼š

- å®Œæ•´äº¤æ˜“å›æ¸¬
    
- æŠ€è¡“æŒ‡æ¨™ç³»çµ±
    
- ç­–ç•¥å„²å­˜ / æ¨™è¨˜ç³»çµ±
    
- ä½¿ç”¨è€…å¸³è™Ÿç³»çµ±
    

> å…ˆè®“ã€Œäº‹ä»¶ç ”ç©¶æµç¨‹ã€å®Œæ•´è·‘èµ·ä¾†ã€‚

---

## 8. æœ¬ç”¢å“çš„çœŸæ­£å®šä½ï¼ˆé—œéµï¼‰

> **è¦–è¦ºåŒ–äº‹ä»¶ç ”ç©¶èˆ‡å‹æ…‹æ¨™è¨˜å¹³å°ï¼ˆVisual Event Study & Pattern Research Platformï¼‰**

ä¸æ˜¯ç•«åœ–å·¥å…·ï¼Œè€Œæ˜¯  
è®“ç ”ç©¶è€…èƒ½åœ¨åŒä¸€è¦–è¦ºå°ºåº¦ä¸‹ï¼Œæ‰¹æ¬¡æ¯”è¼ƒæ¨£æœ¬ï¼Œä¸¦ç«‹å³å¾—åˆ°äº‹ä»¶å¾Œçµ±è¨ˆé©—è­‰çš„ç ”ç©¶å¹³å°ã€‚

---

## 9. ç›¸é—œæ–‡ä»¶

- [User Story Index](user-stories/README.md)
- [Milestone è¦åŠƒ](Milestone/)
- [System Spec](../../specs/system/spec.md)
