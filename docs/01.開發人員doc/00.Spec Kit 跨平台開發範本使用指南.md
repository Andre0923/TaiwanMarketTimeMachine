# Spec Kit 跨平台開發範本使用指南

> **版本**：v1.0.0  
> **最後更新**：2026-01-31  
> **適用對象**：專案負責人、開發人員、非技術背景使用者  
> **核心理念**：讓規格成為真相，文件一致化，降低開發門檻

---

## 目錄

1. [這是什麼？](#1-這是什麼)
2. [為什麼需要這套方法？](#2-為什麼需要這套方法)
3. [核心設計理念](#3-核心設計理念)
4. [快速開始](#4-快速開始)
5. [開發流程總覽](#5-開發流程總覽)
6. [關鍵概念說明](#6-關鍵概念說明)
7. [目錄結構說明](#7-目錄結構說明)
8. [指令速查表](#8-指令速查表)
9. [常見問題](#9-常見問題)
10. [進階閱讀](#10-進階閱讀)

---

## 1. 這是什麼？

這是一套基於 **Specification-Driven Development（SDD，規格驅動開發）** 的專案範本，結合了：

- **SpecKit**：GitHub 官方的規格定義套件（經過自定義改良）
- **FlowKit**：自行開發的流程輔助套件

**一句話說明**：透過 AI 輔助的指令化流程，讓「規格文件」成為專案的唯一真相來源，確保文件、程式碼、測試三者永遠一致。

### 適合誰使用？

| 角色 | 使用場景 |
|------|----------|
| **專案負責人 / PM** | 定義需求、追蹤開發進度、驗收功能 |
| **開發人員** | 依循規格實作、確保文件同步 |
| **非技術背景使用者** | 透過結構化流程參與開發，無需深厚程式背景 |
| **AI Agent** | 作為協作夥伴，遵循規範執行開發任務 |

---

## 2. 為什麼需要這套方法？

### 傳統開發的痛點

```
需求文件 ──寫完就過時──► 程式碼 ──各自演化──► 測試 ──互相脫節──► 混亂
     │                      │                    │
     └──────────────────────┴────────────────────┘
                    「誰是對的？」
```

| 痛點 | 描述 |
|------|------|
| **文件過時** | 需求文件寫完後就沒人維護，與程式碼脫節 |
| **各說各話** | PM、開發、測試對功能理解不一致 |
| **知識分散** | 設計決策散落在 Slack、會議記錄、個人筆記 |
| **依賴記憶** | 「當初為什麼這樣做？」只有離職的同事知道 |
| **AI 亂改** | AI 不知道專案脈絡，容易偏離需求 |

### 本方案的解決思路

```
規格文件（唯一真相）
        │
        ├──約束──► 程式碼（依規格實作）
        │
        ├──約束──► 測試（依規格驗收）
        │
        └──約束──► AI（依規格行動）
        
     「規格說了算」
```

| 解決方案 | 說明 |
|----------|------|
| **規格即真相** | `specs/system/spec.md` 是唯一權威來源 |
| **強制同步** | 修改行為必須同步更新規格 |
| **結構化流程** | 用指令引導每個開發階段 |
| **AI 受約束** | AI 只能依據規格行動，不得自作主張 |
| **版本追溯** | 所有變更都有記錄，可追溯原因 |

---

## 3. 核心設計理念

### 3.1 三大核心原則

```
┌─────────────────────────────────────────────────────────┐
│                    核心設計原則                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   ① 規格即真相                                          │
│      Specification as Single Source of Truth            │
│      ───────────────────────────────────────            │
│      所有行為定義以 spec.md 為準                         │
│      程式碼不能推翻規格                                  │
│      AI 不能自作主張                                    │
│                                                         │
│   ② 文件一致化                                          │
│      Documentation Consistency                          │
│      ───────────────────────────────────────            │
│      spec → plan → tasks → code → test 環環相扣        │
│      修改一處，同步更新相關文件                          │
│      憲法注入 Template 確保格式一致                      │
│                                                         │
│   ③ 流程可驗證                                          │
│      Verifiable Process                                 │
│      ───────────────────────────────────────            │
│      每個階段都有檢查點                                  │
│      一致性檢查阻擋問題                                  │
│      追溯機制確保覆蓋率                                  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3.2 SpecKit + FlowKit 雙套件設計

| 套件 | 職責 | 核心指令 |
|------|------|----------|
| **SpecKit** | 定義「做什麼」| specify, plan, tasks, analyze, implement |
| **FlowKit** | 確保「做對」| consistency-check, trace, unify-flow |

```
SpecKit（規格定義）           FlowKit（流程輔助）
─────────────────           ─────────────────
specify   → 定義規格         BDD-Milestone → 需求拆解
plan      → 技術計畫         system-context → 上下文
tasks     → 任務拆解         consistency-check → 一致性
analyze   → 品質分析         pre-unify-check → 合併前檢查
implement → 實作程式         trace → 追溯索引
                            unify-flow → 合併至系統
```

### 3.3 三層規格架構

```
specs/
├── system/           🟥 System Level（唯一真相）
│   ├── spec.md       ← 系統行為定義
│   ├── data-model.md ← 資料模型
│   ├── flows.md      ← 流程設計
│   ├── contracts/    ← 介面契約
│   └── ui/           ← UI 設計
│
├── features/         🟡 Feature Level（開發中）
│   └── NNN-feature/  ← 本次開發的差異規格
│
└── history/          🟤 History Level（封存）
    └── NNN-feature/  ← 已合併的歷史記錄
```

| 層級 | 用途 | 狀態 |
|------|------|------|
| **System** | 目前系統的完整行為定義 | 🟢 唯一真相 |
| **Feature** | 正在開發的功能變更 | 🟡 開發中 |
| **History** | 已合併的開發記錄 | 🔴 唯讀 |

---

## 4. 快速開始

### 4.1 前置準備

1. **安裝 VS Code** 並啟用 GitHub Copilot
2. **Clone 本範本**：
   ```bash
   git clone https://github.com/your-org/spec-kit-cross-platform-template.git
   cd spec-kit-cross-platform-template
   ```
3. **安裝 Python 環境**（如果是 Python 專案）：
   ```bash
   uv venv
   uv sync
   ```

### 4.2 第一個 Feature 開發流程

```bash
# 1. 定義規格
/speckit.specify 我想要建立一個使用者登入功能，支援 email 和密碼登入

# 2. 建立技術計畫
/speckit.plan 使用 FastAPI 框架，JWT Token 驗證

# 3. 拆解任務
/speckit.tasks

# 4. 分析一致性
/speckit.analyze

# 5. 開始實作
/speckit.implement

# 6. 合併至系統
/flowkit.pre-unify-check
/flowkit.unify-flow
```

### 4.3 開發流程口訣

```
需求 → 規格 → 計畫 → 任務 → 分析 → 實作 → 驗證 → 合併
 ↓      ↓      ↓      ↓      ↓      ↓      ↓      ↓
PRD  specify  plan  tasks analyze impl  check unify
```

---

## 5. 開發流程總覽

### 5.1 完整開發流程圖

```
┌──────────────────────────────────────────────────────────────────┐
│                         SDD 開發流程                              │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📋 Phase 1：需求規劃                                            │
│  ─────────────────────                                           │
│  PRD → [BDD-Milestone] → User Stories → [Milestone-context]      │
│                                              │                   │
│                                              ▼                   │
│  📝 Phase 2：規格定義                                            │
│  ─────────────────────                                           │
│  [specify] → spec.md → [system-context] → [plan] → plan.md       │
│                                              │                   │
│                                              ▼                   │
│                                     [consistency-check]          │
│                                              │                   │
│                                              ▼                   │
│  📋 Phase 3：任務拆解                                            │
│  ─────────────────────                                           │
│  [tasks] → tasks.md → [analyze] → 分析報告                       │
│                                              │                   │
│                                              ▼                   │
│  💻 Phase 4：實作                                                │
│  ─────────────────────                                           │
│  [implement] → 程式碼 + 測試 ←──── [refine-loop]                 │
│                    │                                             │
│                    ▼                                             │
│  ✅ Phase 5：驗證合併                                            │
│  ─────────────────────                                           │
│  [pre-unify-check] → [trace] → [unify-flow] → System 更新        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 5.2 各階段說明

| Phase | 目標 | 關鍵指令 | 產出 |
|-------|------|----------|------|
| **需求規劃** | 將模糊需求轉為結構化 | BDD-Milestone | User Stories, Milestone |
| **規格定義** | 定義功能規格與技術計畫 | specify, plan | spec.md, plan.md |
| **任務拆解** | 將計畫轉為可執行任務 | tasks, analyze | tasks.md |
| **實作** | 按規格撰寫程式碼 | implement | 程式碼, 測試 |
| **驗證合併** | 確認品質並整合 | unify-flow | System Spec 更新 |

---

## 6. 關鍵概念說明

### 6.1 User Story 與 Acceptance Criteria

本範本採用 **BDD（Behavior-Driven Development）** 格式撰寫需求：

```markdown
### US1: 使用者可以透過 Email 登入系統

**As a** 使用者  
**I want** 使用 Email 和密碼登入系統  
**So that** 我可以存取個人化功能

#### Acceptance Criteria

**AC1 — 正常登入流程**
- **Given** 使用者已註冊且輸入正確的 Email 和密碼
- **When** 點擊登入按鈕
- **Then** 系統顯示登入成功並導向首頁

**AC2 — 密碼錯誤處理**
- **Given** 使用者輸入錯誤的密碼
- **When** 點擊登入按鈕
- **Then** 系統顯示「密碼錯誤」提示，不允許登入
```

### 6.2 憲法（Constitution）

憲法是專案的「根本大法」，定義了不可違反的原則：

| 分類 | 說明 | 範例 |
|------|------|------|
| 🔴 **NON-NEGOTIABLE** | 絕對不可違反 | SDD 方法論、目錄結構、Test-First |
| 🟡 **SHOULD** | 強烈建議遵守 | 可維護性優先、介面-邏輯分離 |
| 🟢 **MAY** | 可選擇性遵守 | 程式碼風格細節 |

### 6.3 一致性檢查

系統會在多個階段進行一致性檢查，確保文件不互相矛盾：

| 檢查點 | 時機 | 檢查內容 |
|--------|------|----------|
| `consistency-check` | Plan 後 | 計畫是否覆用現有功能、是否重複造輪子 |
| `analyze` | Tasks 後 | spec ↔ plan ↔ tasks 是否一致 |
| `pre-unify-check` | Implement 後 | 實作是否符合規格 |

### 6.4 追溯性（Traceability）

每個程式碼檔案都會標註其對應的規格：

```python
# @spec US1 (001-user-auth/spec.md#user-story-1)
# @spec-ac AC1.1, AC1.2

class AuthService:
    """使用者認證服務"""
    pass
```

這讓你可以：
- 快速找到某段程式碼對應的需求
- 確認每個需求都有對應的實作
- Code Review 時快速理解脈絡

---

## 7. 目錄結構說明

```
project-root/
├── .specify/                  # SpecKit 內部資料
│   ├── memory/
│   │   └── constitution.md   # 專案憲法
│   ├── templates/            # 文件模板
│   └── scripts/              # 自動化腳本
│
├── .flowkit/                  # FlowKit 內部資料
│   ├── memory/
│   │   ├── system-context.md # 系統上下文
│   │   └── system-context-index.md
│   └── templates/
│
├── .github/agents/            # AI 指令檔
│   ├── speckit.*.agent.md    # SpecKit 指令
│   └── flowkit.*.agent.md    # FlowKit 指令
│
├── specs/                     # 🔴 規格中心（SDD 核心）
│   ├── system/               # 系統級規格（唯一真相）
│   ├── features/             # Feature 級規格
│   └── history/              # 歷史封存
│
├── src/                       # 程式碼
├── tests/                     # 測試
├── logs/                      # 日誌
├── docs/                      # 專案文件
└── .artifacts/                # 工具產物（coverage 等）
```

### 關鍵目錄說明

| 目錄 | 用途 | 誰會修改 |
|------|------|----------|
| `specs/system/` | 系統行為定義（唯一真相）| 僅 Unify Flow |
| `specs/features/` | 開發中的 Feature | 開發期間 |
| `src/` | 程式碼 | implement 階段 |
| `tests/` | 測試檔案 | 先於 src 修改 |
| `logs/` | 執行日誌 | 自動產生 |

---

## 8. 指令速查表

### 8.1 SpecKit 指令

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/speckit.constitution` | 更新專案憲法 | 專案初始化或準則變更 |
| `/speckit.specify` | 定義功能規格 | 開始新 Feature |
| `/speckit.clarify` | 釐清規格細節 | 規格不清楚時 |
| `/speckit.plan` | 建立技術計畫 | specify 完成後 |
| `/speckit.tasks` | 拆解可執行任務 | plan 完成後 |
| `/speckit.analyze` | 分析一致性 | tasks 完成後 |
| `/speckit.implement` | 實作程式碼 | analyze 通過後 |
| `/speckit.checklist` | 建立檢查清單 | 需要驗收清單時 |

### 8.2 FlowKit 指令

| 指令 | 用途 | 使用時機 |
|------|------|----------|
| `/flowkit.BDD-Milestone` | 需求拆解 | PRD 轉 User Stories |
| `/flowkit.Milestone-context` | 抽取上下文 | BDD-Milestone 後 |
| `/flowkit.system-context` | 建立系統上下文 | plan 前（非首個 Feature）|
| `/flowkit.consistency-check` | 檢查覆用與一致性 | plan 後 |
| `/flowkit.refine-loop` | 小幅修正循環 | implement 中需要調整 |
| `/flowkit.pre-unify-check` | 合併前檢查 | implement 完成後 |
| `/flowkit.trace` | 建立追溯索引 | pre-unify-check 後 |
| `/flowkit.requirement-sync` | 需求文件同步 | 將 Feature 變更回寫至 PRD/US |
| `/flowkit.unify-flow` | 合併至 System | 最終合併 |

### 8.3 指令流程圖

```
                    PRD
                     │
                     ▼
            ┌────────────────┐
            │ BDD-Milestone  │ ← 需求規劃
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │    specify     │ ← 規格定義
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │ system-context │ ← 上下文準備
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │     plan       │ ← 技術計畫
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │consistency-check│ ← 一致性檢查
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │     tasks      │ ← 任務拆解
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │    analyze     │ ← 品質分析
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │   implement    │ ◄─┐ ← 實作
            └────────────────┘   │
                     │           │
                     │    ┌──────────────┐
                     │    │ refine-loop  │ ← 修正循環
                     │    └──────────────┘
                     ▼
            ┌────────────────┐
            │pre-unify-check │ ← 合併前檢查
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │     trace      │ ← 追溯索引
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │requirement-sync│ ← 需求同步
            └────────────────┘
                     │
                     ▼
            ┌────────────────┐
            │   unify-flow   │ ← 合併至系統
            └────────────────┘
```

---

## 9. 常見問題

### Q1: 我不會寫程式，可以使用這套方法嗎？

**可以！** 這套方法的設計目標之一就是讓非技術背景的人也能參與開發：

1. **需求定義**：用自然語言描述需求，AI 會轉換為結構化規格
2. **規格審閱**：檢查 AI 產生的 User Story 和 AC 是否正確
3. **驗收測試**：依據 AC 驗證功能是否符合預期

你需要關注的是「功能描述是否正確」，而非「程式碼怎麼寫」。

### Q2: AI 會不會亂改我的程式碼？

**不會！** 本範本對 AI 有嚴格約束：

- AI 必須依據 `specs/system/spec.md` 行動
- AI 不得以「程式碼現況」推翻規格
- 修改 System Spec 必須走 Unify Flow
- 重大變更必須先提案，等人類批准

### Q3: 為什麼要分 System / Feature / History 三層？

| 層級 | 類比 | 目的 |
|------|------|------|
| System | 正式版產品 | 確保「現在系統是什麼樣」有唯一答案 |
| Feature | 開發中版本 | 隔離開發變更，不影響正式版定義 |
| History | 歷史記錄 | 保留決策軌跡，方便追溯 |

### Q4: consistency-check 和 analyze 有什麼不同？

| 檢查 | 時機 | 範圍 |
|------|------|------|
| `consistency-check` | plan 後 | 檢查 plan 與 System 是否衝突、是否重複造輪子 |
| `analyze` | tasks 後 | 檢查 spec ↔ plan ↔ tasks 是否一致 |

### Q5: 什麼時候需要用 refine-loop？

當你在 implement 階段發現需要**小幅調整**時：
- 發現規格有小錯誤
- 需要微調技術方案
- Bug Fix 需要同步更新規格

如果是**大幅變更**，建議回到 specify 或 plan 階段重新處理。

---

## 10. 進階閱讀

### 相關文件

| 文件 | 位置 | 說明 |
|------|------|------|
| SpecKit 差異說明 | [01.SpecKit自定義版本差異說明.md](./01.SpecKit自定義版本差異說明.md) | 與原版 SpecKit 的差異 |
| FlowKit 功能說明 | [docs/77.flowkit相關文件/README.md](../77.flowkit相關文件/README.md) | FlowKit 完整說明 |
| 開發流程圖 | [docs/77.flowkit相關文件/SDD開發流程圖.md](../77.flowkit相關文件/SDD開發流程圖.md) | Mermaid 流程圖 |
| 專案憲法 | [.specify/memory/constitution.md](../../.specify/memory/constitution.md) | 專案準則 |
| AI 行為規範 | [.github/copilot-instructions.md](../../.github/copilot-instructions.md) | AI 全域行為準則 |

### 軟體工程參考

- **Specification-Driven Development (SDD)**：以規格為中心的開發方法
- **Behavior-Driven Development (BDD)**：以行為描述需求的方法
- **Test-Driven Development (TDD)**：先寫測試再寫程式碼

### 原版 SpecKit

- GitHub 官方 Spec Kit：[github/spec-kit](https://github.com/github/spec-kit)

---

## 附錄：核心規範速查

### NON-NEGOTIABLE 規範 (🔴)

| 規範 | 說明 |
|------|------|
| **SDD 方法論** | 先規格、後實作 |
| **目錄結構** | 檔案必須放在指定位置 |
| **System Spec 保護** | 只能透過 Unify Flow 修改 |
| **Test-First** | 先寫測試、後寫程式 |
| **Observability** | 所有流程必須可觀察（logging） |

### AI 約束規範

| 約束 | 說明 |
|------|------|
| 不確定時先問 | 不得自行假設 |
| 重大變更先提案 | 等待人類批准 |
| 依規格行動 | 不得以程式碼推翻規格 |
| 不從歷史推導現行 | history/ 是唯讀 |

### Commit Message 格式

```
<type>: <繁體中文摘要>

類型：feat / fix / refactor / docs / test / chore
```

---

**版本歷史**：
- v1.0.0 (2026-01-31)：初版建立

---

> 💡 **提示**：如果你是第一次使用，建議先閱讀 [§4 快速開始](#4-快速開始) 和 [§5 開發流程總覽](#5-開發流程總覽)，然後在實際專案中邊做邊學。
