# Feature ç›®éŒ„è·¯å¾‘ä¿®æ­£æŒ‡å—

> **ç‰ˆæœ¬**: 1.0  
> **å»ºç«‹æ—¥æœŸ**: 2025-12-19  
> **é©ç”¨å°è±¡**: ä½¿ç”¨ Constitution v4.0+ ä½†å°šæœªæ›´æ–° Spec Kit è…³æœ¬çš„å°ˆæ¡ˆ

---

## 1. è®Šæ›´èƒŒæ™¯

### 1.1 å°ˆæ¡ˆæ†²ç« ç›®éŒ„çµæ§‹è¦ç¯„

æ ¹æ“š `constitution.md` Â§1.0 çš„ç›®éŒ„çµæ§‹è¦ç¯„ï¼Œ**Feature ç›®éŒ„ MUST ä½æ–¼ `specs/features/` ä¸‹**ï¼š

```
specs/
â”œâ”€â”€ system/                    # ğŸŸ¥ ç³»çµ±ç´š Spec & Designï¼ˆå”¯ä¸€çœŸç›¸ï¼‰
â”œâ”€â”€ features/                  # ğŸŸ¡ Feature ç´š Specï¼ˆæ¯æ¬¡é–‹ç™¼çš„å·®ç•°è¦æ ¼ï¼‰
â”‚   â”œâ”€â”€ NNN-feature-name/
â”‚   â”‚   â”œâ”€â”€ spec.md
â”‚   â”‚   â”œâ”€â”€ plan.md
â”‚   â”‚   â”œâ”€â”€ tasks.md
â”‚   â”‚   â””â”€â”€ checklists/        # é¸ç”¨ï¼šé©—è­‰æ¸…å–®
â”‚   â””â”€â”€ ...
â””â”€â”€ history/                   # ğŸ”´ å°å­˜
```

### 1.2 å•é¡Œæè¿°

èˆŠç‰ˆ Spec Kit è…³æœ¬å°‡ Feature ç›®éŒ„å»ºç«‹åœ¨ `specs/NNN-feature-name/`ï¼ˆå°‘äº† `features/` å±¤ç´šï¼‰ï¼Œèˆ‡ `constitution.md` è¦ç¯„ä¸ç¬¦ã€‚

---

## 2. éœ€è¦ä¿®æ­£çš„æª”æ¡ˆ

### 2.1 ä¿®æ­£æ¸…å–®ç¸½è¦½

| æª”æ¡ˆè·¯å¾‘ | ä¿®æ­£é¡å‹ | å„ªå…ˆç´š |
|----------|----------|--------|
| `.specify/scripts/powershell/create-new-feature.ps1` | è·¯å¾‘è®Šæ•¸ | ğŸ”´ HIGH |
| `.specify/scripts/powershell/common.ps1` | å‡½æ•¸å¯¦ä½œ | ğŸ”´ HIGH |
| `.cursor/commands/speckit.specify.md` | æ–‡ä»¶æè¿° | ğŸŸ¡ MEDIUM |
| `.github/agents/speckit.specify.agent.md` | æ–‡ä»¶æè¿° | ğŸŸ¡ MEDIUM |

---

## 3. å…·é«”ä¿®æ­£å…§å®¹

### 3.1 `.specify/scripts/powershell/create-new-feature.ps1`

**ä½ç½®**ï¼šç´„ç¬¬ 150-155 è¡Œï¼ˆ`$specsDir` è®Šæ•¸å®šç¾©è™•ï¼‰

**ä¿®æ­£å‰**ï¼š
```powershell
$specsDir = Join-Path $repoRoot 'specs'
New-Item -ItemType Directory -Path $specsDir -Force | Out-Null
```

**ä¿®æ­£å¾Œ**ï¼š
```powershell
# constitution.md Â§1.0: Feature ç›®éŒ„ MUST ä½æ–¼ specs/features/ ä¸‹
$specsDir = Join-Path $repoRoot 'specs' 'features'
New-Item -ItemType Directory -Path $specsDir -Force | Out-Null
```

---

### 3.2 `.specify/scripts/powershell/common.ps1`

**ä½ç½®**ï¼š`Get-FeatureDir` å‡½æ•¸ï¼ˆç´„ç¬¬ 90-93 è¡Œï¼‰

**ä¿®æ­£å‰**ï¼š
```powershell
function Get-FeatureDir {
    param([string]$RepoRoot, [string]$Branch)
    Join-Path $RepoRoot "specs/$Branch"
}
```

**ä¿®æ­£å¾Œ**ï¼š
```powershell
function Get-FeatureDir {
    param([string]$RepoRoot, [string]$Branch)
    # constitution.md Â§1.0: Feature ç›®éŒ„ MUST ä½æ–¼ specs/features/ ä¸‹
    Join-Path $RepoRoot "specs/features/$Branch"
}
```

---

### 3.3 `.cursor/commands/speckit.specify.md`ï¼ˆCursor å°ˆç”¨ï¼‰

**ä½ç½®**ï¼šStep 2.b çš„ Specs directories æœå°‹æè¿°

**ä¿®æ­£å‰**ï¼š
```markdown
- Specs directories: Check for directories matching `specs/[0-9]+-<short-name>`
```

**ä¿®æ­£å¾Œ**ï¼š
```markdown
- Specs directories: Check for directories matching `specs/features/[0-9]+-<short-name>`
```

---

### 3.4 `.github/agents/speckit.specify.agent.md`ï¼ˆGitHub Copilot å°ˆç”¨ï¼‰

**ä½ç½®**ï¼šStep 2.b çš„ Specs directories æœå°‹æè¿°

**ä¿®æ­£å‰**ï¼š
```markdown
- Specs directories: Check for directories matching `specs/[0-9]+-<short-name>`
```

**ä¿®æ­£å¾Œ**ï¼š
```markdown
- Specs directories: Check for directories matching `specs/features/[0-9]+-<short-name>`
```

---

## 4. é€£å¸¶å½±éŸ¿çš„æª”æ¡ˆï¼ˆç„¡éœ€ä¿®æ”¹ï¼‰

ä»¥ä¸‹æª”æ¡ˆä¾è³´ä¸Šè¿°ä¿®æ­£çš„æª”æ¡ˆï¼Œä¿®æ­£å¾Œæœƒè‡ªå‹•æ­£ç¢ºé‹ä½œï¼š

| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `.specify/scripts/powershell/setup-plan.ps1` | ä¾è³´ `common.ps1` çš„ `Get-FeaturePathsEnv` |
| `.specify/scripts/powershell/check-prerequisites.ps1` | ä¾è³´ `common.ps1` çš„ `Get-FeaturePathsEnv` |
| `.cursor/commands/speckit.plan.md` | ä½¿ç”¨ `check-prerequisites.ps1` è¼¸å‡ºçš„ `FEATURE_DIR` |
| `.cursor/commands/speckit.tasks.md` | ä½¿ç”¨ `check-prerequisites.ps1` è¼¸å‡ºçš„ `FEATURE_DIR` |
| `.cursor/commands/speckit.implement.md` | ä½¿ç”¨ `check-prerequisites.ps1` è¼¸å‡ºçš„ `FEATURE_DIR` |
| `.cursor/commands/speckit.analyze.md` | ä½¿ç”¨ `check-prerequisites.ps1` è¼¸å‡ºçš„ `FEATURE_DIR` |
| `.cursor/commands/speckit.checklist.md` | ä½¿ç”¨ `check-prerequisites.ps1` è¼¸å‡ºçš„ `FEATURE_DIR` |

---

## 5. é©—è­‰æ–¹å¼

### 5.1 é©—è­‰è…³æœ¬è·¯å¾‘

åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ç¢ºèªè·¯å¾‘æ­£ç¢ºï¼š

```powershell
# æ¸¬è©¦ create-new-feature.ps1 çš„è¼¸å‡º
.specify/scripts/powershell/create-new-feature.ps1 -Json "test feature" -Number 999 -ShortName "test"
# é æœŸè¼¸å‡ºæ‡‰åŒ…å«ï¼šspecs/features/999-test
```

### 5.2 é©—è­‰ common.ps1

```powershell
# è¼‰å…¥ common.ps1 ä¸¦æ¸¬è©¦ Get-FeatureDir
. .specify/scripts/powershell/common.ps1
$testPath = Get-FeatureDir -RepoRoot "C:/project" -Branch "001-test"
Write-Output $testPath
# é æœŸè¼¸å‡ºï¼šC:/project/specs/features/001-test
```

### 5.3 æª¢æŸ¥ç¾æœ‰ç›®éŒ„çµæ§‹

ç¢ºèªå°ˆæ¡ˆå·²æœ‰æ­£ç¢ºçš„ç›®éŒ„çµæ§‹ï¼š

```powershell
# ç¢ºèª specs/features/ å­˜åœ¨
Test-Path "specs/features"

# åˆ—å‡ºç¾æœ‰çš„ Feature ç›®éŒ„
Get-ChildItem "specs/features" -Directory
```

---

## 6. é·ç§»ç¾æœ‰ Featureï¼ˆå¦‚é©ç”¨ï¼‰

å¦‚æœå°ˆæ¡ˆå·²æœ‰ä½æ–¼ `specs/NNN-feature-name/` çš„ Feature ç›®éŒ„ï¼Œéœ€è¦é·ç§»ï¼š

```powershell
# 1. å»ºç«‹ specs/features/ ç›®éŒ„
New-Item -ItemType Directory -Path "specs/features" -Force

# 2. ç§»å‹•ç¾æœ‰ Feature ç›®éŒ„ï¼ˆå‡è¨­æœ‰ 001-my-featureï¼‰
Move-Item "specs/001-my-feature" "specs/features/001-my-feature"

# 3. ç¢ºèª specs/system/ å’Œ specs/history/ ä¿æŒåŸä½
# ï¼ˆé€™å…©å€‹ç›®éŒ„æœ¬ä¾†å°±åœ¨ specs/ ä¸‹ï¼Œä¸éœ€è¦ç§»å‹•ï¼‰
```

---

## 7. Git Commit å»ºè­°

ä¿®æ­£å®Œæˆå¾Œï¼Œå»ºè­°ä½¿ç”¨ä»¥ä¸‹ commit messageï¼š

```bash
git add .
git commit -m "fix: ä¿®æ­£ Feature ç›®éŒ„è·¯å¾‘è‡³ specs/features/ (constitution.md Â§1.0)"
```

---

## 8. åƒè€ƒè³‡æ–™

- [constitution.md v4.1](.specify/memory/constitution.md) â€” Â§1.0 ç›®éŒ„çµæ§‹ã€Â§1.3 Feature Spec å±¤
- [SDD é–‹ç™¼æµç¨‹æŒ‡å—](03.SDDé–‹ç™¼æµç¨‹æŒ‡å—.md)
- [Spec Kit SDD æ¶æ§‹èˆ‡é–‹ç™¼è¦ç¯„å¿«é€Ÿå…¥é–€](03.Spec%20Kit%20SDD%20æ¶æ§‹èˆ‡é–‹ç™¼è¦ç¯„å¿«é€Ÿå…¥é–€.md)
