# SDD é–‹ç™¼æµç¨‹æŒ‡å—

> **æ–‡ä»¶æ€§è³ª**ï¼šåœ˜éšŠé–‹ç™¼æµç¨‹æŒ‡å—  
> **é©ç”¨å°è±¡**ï¼šæ‰€æœ‰åƒèˆ‡ AI è¼”åŠ©é–‹ç™¼çš„åœ˜éšŠæˆå“¡  
> **æ†²æ³•ç‰ˆæœ¬**ï¼šConstitution v4.0.3  
> **ç‰ˆæœ¬**ï¼š2.0.0  
> **æœ€å¾Œæ›´æ–°**ï¼š2025-12-16

---

## ç›®éŒ„

1. [é–‹ç™¼æµç¨‹ç¸½è¦½](#ä¸€é–‹ç™¼æµç¨‹ç¸½è¦½)
2. [æ ¸å¿ƒé–‹ç™¼æµç¨‹](#äºŒæ ¸å¿ƒé–‹ç™¼æµç¨‹)
3. [ä¾‹å¤–æƒ…å¢ƒè™•ç†](#ä¸‰ä¾‹å¤–æƒ…å¢ƒè™•ç†)
4. [é‡è¦è¦å‰‡](#å››é‡è¦è¦å‰‡)
5. [ç›®éŒ„çµæ§‹](#äº”ç›®éŒ„çµæ§‹)
6. [æª¢æŸ¥æ¸…å–®](#å…­æª¢æŸ¥æ¸…å–®)
7. [å¸¸è¦‹å•é¡Œ](#ä¸ƒå¸¸è¦‹å•é¡Œ)

---

## ä¸€ã€é–‹ç™¼æµç¨‹ç¸½è¦½

```
PRD â†’ User Story (BDD) â†’ Phase è¦åŠƒ â†’ [Feature é–‹ç™¼ â†’ Unify Flow] â†’ è¿­ä»£
```

### ç°¡åŒ–æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SDD é–‹ç™¼æµç¨‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ“ è¦åŠƒéšæ®µ                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  PRD    â”‚ â†’  â”‚ User Story BDD  â”‚ â†’ Phase/Sprint è¦åŠƒ  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                         â”‚
â”‚  ğŸ”§ é–‹ç™¼éšæ®µï¼ˆæ¯å€‹ Feature é‡è¤‡ï¼‰                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å»ºç«‹åˆ†æ”¯ â†’ spec.md â†’ plan.md â†’ tasks.md â†’ å¯¦ä½œ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                              â”‚
â”‚  ğŸ“¦ çµ±åˆéšæ®µ                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Unify Flow â†’ System Spec æ›´æ–° â†’ åˆä½µè‡³ main      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                              â”‚
â”‚                    ä¸‹ä¸€å€‹ Feature                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ ¸å¿ƒé–‹ç™¼æµç¨‹

### 2.1 è¦åŠƒéšæ®µ

#### Step 1ï¼šPRD å»ºç«‹

**å·¥å…·**ï¼šChatGPT æˆ–å…¶ä»– AI  
**ç”¢å‡º**ï¼š`docs/PRD.md`

**å…§å®¹å»ºè­°**ï¼š
- å°ˆæ¡ˆèƒŒæ™¯èˆ‡ç›®æ¨™
- åŠŸèƒ½éœ€æ±‚æ¸…å–®
- è³‡æ–™éœ€æ±‚ï¼ˆæ ¸å¿ƒå¯¦é«”ã€æ¬„ä½ã€é—œè¯ï¼‰
- ä»‹é¢éœ€æ±‚ï¼ˆAPI ç«¯é»ã€è³‡æ–™æ ¼å¼ï¼‰

---

#### Step 2ï¼šUser Story BDD åŒ–

**å·¥å…·**ï¼šSDD User Story BDD åŒ–æ©Ÿå™¨äºº  
**ç”¢å‡ºä½ç½®**ï¼š`docs/`

| æ–‡ä»¶ | èªªæ˜ | å¿…è¦æ€§ |
|------|------|--------|
| `Full-User-Story-List.md` | å®Œæ•´ BDD User Story æ¸…å–® | âœ… å¿…è¦ |
| `Phase-X.md` | ç‰¹å®š Phase çš„ User Story | âœ… å¿…è¦ |
| `Phase-X-Sprint-Breakdown.md` | Sprint æ‹†åˆ† | é¸æ“‡æ€§ |

**BDD æ ¼å¼ç¯„ä¾‹**ï¼š
```markdown
### US1: ä½¿ç”¨è€…å¯ä»¥ä¸Šå‚³å½±ç‰‡æª”æ¡ˆ

**As a** ä¸€èˆ¬ä½¿ç”¨è€…  
**I want** ä¸Šå‚³å½±ç‰‡æª”æ¡ˆåˆ°ç³»çµ±  
**So that** ç³»çµ±å¯ä»¥ç‚ºæˆ‘ç”Ÿæˆå­—å¹•

#### Acceptance Criteria

**AC1 â€” æˆåŠŸä¸Šå‚³**
- **Given** ä½¿ç”¨è€…å·²ç™»å…¥ç³»çµ±
- **When** ä½¿ç”¨è€…é¸æ“‡ä¸¦ä¸Šå‚³ä¸€å€‹æœ‰æ•ˆçš„å½±ç‰‡æª”æ¡ˆ
- **Then** ç³»çµ±é¡¯ç¤ºä¸Šå‚³æˆåŠŸè¨Šæ¯
```

---

#### Step 3ï¼šPhase èˆ‡ Sprint è¦åŠƒ

**åŸå‰‡**ï¼šPhase éå¤§æ™‚ï¼Œæ‹†åˆ†æˆå¤šå€‹ Sprintï¼Œæ¯å€‹ Sprint è¦–ç‚ºä¸€å€‹ Featureã€‚

```
Phase 1
â”œâ”€â”€ Sprint 1 â†’ Feature: 001-phase1-sprint1-xxx
â”œâ”€â”€ Sprint 2 â†’ Feature: 002-phase1-sprint2-xxx
â””â”€â”€ (Phase 1 å®Œæˆ)
```

---

### 2.2 é–‹ç™¼éšæ®µ

#### Step 4ï¼šFeature é–‹ç™¼

```bash
# 1. å»ºç«‹åˆ†æ”¯
git switch main && git pull
git switch -c feat/NNN-feature-name

# 2. å»ºç«‹ Feature ç›®éŒ„
mkdir -p specs/features/NNN-feature-name
```

**ä½¿ç”¨ Spec Kit**ï¼š
1. `/speckit.specify` â†’ ç”Ÿæˆ `spec.md`
2. `/speckit.plan` â†’ ç”Ÿæˆ `plan.md`
3. `/speckit.tasks` â†’ ç”Ÿæˆ `tasks.md`
4. å¯¦ä½œç¨‹å¼ç¢¼ + æ¸¬è©¦

---

### 2.3 çµ±åˆéšæ®µ

#### Step 5ï¼šUnify Flow

> âš ï¸ **é—œéµæ­¥é©Ÿ**ï¼šç¢ºä¿è¦æ ¼çµ±ä¸€ï¼Œé¿å…å¤šä»½è¦æ ¼ä¸¦å­˜

**åŸ·è¡Œæ™‚æ©Ÿ**ï¼šFeature å®Œæˆã€æº–å‚™ PR å‰

**æ“ä½œæ–¹å¼**ï¼š
```
è«‹åŸ·è¡Œ Unify Flowï¼Œè™•ç† specs/features/001-xxx/
```

**AI åŸ·è¡Œ**ï¼š
1. è®€å– Feature Spec
2. åˆä½µè‡³ System Specï¼ˆè¡çªä»¥ Feature ç‚ºæº–ï¼‰
3. æ›´æ–° System Design
4. å°å­˜ Feature è‡³ history
5. åŸ·è¡Œ `/speckit.analyze`

**å®Œæ•´æµç¨‹**ï¼šåƒè¦‹ `specs/system/unify-flow.md`

---

### 2.4 è¿­ä»£é–‹ç™¼

| æƒ…å¢ƒ | è™•ç†æ–¹å¼ |
|------|----------|
| åŒ Phase ä¸‹ä¸€å€‹ Sprint | å»ºç«‹æ–° Feature åˆ†æ”¯ï¼Œç¹¼çºŒé–‹ç™¼ |
| é€²å…¥ä¸‹ä¸€ Phase | è¼¸å‡ºæ–°çš„ `Phase-Y.md`ï¼Œè¦åŠƒæ–° Sprint |
| æ–°éœ€æ±‚åŠ å…¥ | æ›´æ–° PRD â†’ User Story List â†’ è¦åŠƒæ–° Feature |

---

## ä¸‰ã€ä¾‹å¤–æƒ…å¢ƒè™•ç†

> ğŸ“– **è©³ç´°èªªæ˜**ï¼šåƒè¦‹ [03.è¦æ ¼èª¿æ•´èˆ‡Bugä¿®å¾©æŒ‡å—.md](03.è¦æ ¼èª¿æ•´èˆ‡Bugä¿®å¾©æŒ‡å—.md)

### 3.1 Debug èˆ‡è¦æ ¼æ›´æ–°

| å•é¡Œé¡å‹ | è™•ç†æ–¹å¼ |
|----------|----------|
| å¯¦ä½œæœªç¬¦åˆæ—¢æœ‰è¦æ ¼ | ä¿®æ­£ç¨‹å¼ç¢¼ï¼Œ**ä¸æ”¹è¦æ ¼** |
| è¦æ ¼ä¸è¶³æˆ–éŒ¯èª¤ | **å…ˆæ›´æ–° Feature Spec**ï¼Œå†æ”¹ç¨‹å¼ç¢¼ |

**é‡è¦é™åˆ¶**ï¼š
- Feature é–‹ç™¼ä¸­ï¼Œ**MUST NOT** ç›´æ¥ä¿®æ”¹ `specs/system/`
- æ‰€æœ‰è¦æ ¼èª¿æ•´ï¼Œæœ€çµ‚é€é Unify Flow æ•´åˆ

---

### 3.2 Feature ä¸­é€”æ”¹è¦æ ¼

| æƒ…å¢ƒ | åˆ¤æ–·æ¨™æº– | è™•ç†æ–¹å¼ |
|------|----------|----------|
| è‡ªç„¶æ¼”åŒ– | è£œå……/ä¿®æ­£åŸ spec | ç›´æ¥ä¿®æ”¹ Feature Spec |
| éœ€æ±‚æ“´å¼µ | æ–°å¢å…¨æ–° user goal | é–‹æ–° Feature |

**æ ¸å¿ƒåŸå‰‡**ï¼šå¯ä»¥æ”¹è¦æ ¼ï¼Œä½†ä¸èƒ½å·æ¸¡æ–° Featureã€‚

---

### 3.3 main åˆ†æ”¯ Bug ä¿®å¾©

| Bug é¡å‹ | èªªæ˜ | åˆ†æ”¯å‘½å | éœ€è¦ Unify Flow? |
|----------|------|----------|------------------|
| å¯¦ä½œ Bug | ç¨‹å¼ç¢¼æœªç¬¦åˆ Spec | `fix/NNN-xxx` | âŒ ä¸éœ€è¦ |
| è¦æ ¼ Bug | Spec å®šç¾©æœ‰èª¤ | `hotfix/NNN-xxx` | âœ… éœ€è¦ |

---

### 3.4 UI è¡Œç‚ºèˆ‡è¦æ ¼åŒæ­¥

- UI è¡Œç‚ºè®Šæ›´ = è¦æ ¼è®Šæ›´ï¼Œå¿…é ˆæ›´æ–° Feature Spec
- é–‹ç™¼ä¸­å…è¨± UI æ¼”åŒ–ï¼Œä½†æ•´åˆå‰ MUST å›å¡«è‡³ Spec
- Debug æ™‚ä¿®æ”¹ Feature Specï¼Œ**é** System Spec

---

## å››ã€é‡è¦è¦å‰‡

### 4.1 Feature è­˜åˆ¥è¦å‰‡

> AI ä¸æœƒè‡ªè¡Œæ±ºå®šè™•ç†å“ªå€‹ Featureï¼Œå¿…é ˆç”±äººé¡æŒ‡å®š

```
âœ… è«‹åŸ·è¡Œ Unify Flowï¼Œè™•ç† specs/features/001-file-upload/
âŒ è«‹åŸ·è¡Œ Unify Flowï¼ˆæœªæŒ‡å®šç›®éŒ„ï¼‰
```

### 4.2 ç‰ˆæœ¬åˆä½µåŸå‰‡

| æª”æ¡ˆ | è§’è‰² |
|------|------|
| System Spec | åŸºåº•ï¼ˆBaseï¼‰ |
| Feature Spec | æ›´æ–°ä¾†æºï¼ˆUpdateï¼‰ |

**è¡çªè™•ç†**ï¼šä»¥ Feature Spec ç‚ºæº–ï¼ˆä»£è¡¨æœ€æ–°è¨­è¨ˆæ„åœ–ï¼‰

### 4.3 é˜²è­·æ©Ÿåˆ¶

| é¢¨éšª | é˜²è­·è¦å‰‡ |
|------|----------|
| AI åˆä½µéŒ¯èª¤ Feature | å¿…é ˆç”±äººé¡æŒ‡å®š Feature ç›®éŒ„ |
| AI ç”¢ç”Ÿå¹»è¦º | åªèƒ½åˆä½µ Feature Spec æ˜ç¢ºå…§å®¹ |
| AI æ„å¤–åˆªé™¤ | Feature Spec æœªæåŠçš„éƒ¨åˆ†å¿…é ˆä¿ç•™ |

---

## äº”ã€ç›®éŒ„çµæ§‹

```
project-root/
â”œâ”€â”€ specs/                           # ğŸ”´ SDD ä¸­å¿ƒ
â”‚   â”œâ”€â”€ system/                      # ğŸŸ¢ å”¯ä¸€çœŸç›¸
â”‚   â”‚   â”œâ”€â”€ spec.md                  # System Spec
â”‚   â”‚   â”œâ”€â”€ data-model.md            # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ flows.md                 # æµç¨‹åœ–
â”‚   â”‚   â”œâ”€â”€ contracts/               # ä»‹é¢å¥‘ç´„
â”‚   â”‚   â””â”€â”€ unify-flow.md            # çµ±åˆæµç¨‹ SOP
â”‚   â”œâ”€â”€ features/                    # ğŸŸ¡ é–‹ç™¼ä¸­ Feature
â”‚   â”‚   â””â”€â”€ NNN-feature-name/
â”‚   â””â”€â”€ history/                     # ğŸ”´ å°å­˜ï¼ˆå”¯è®€ï¼‰
â”‚
â”œâ”€â”€ src/                             # ç¨‹å¼ç¢¼
â”œâ”€â”€ tests/                           # æ¸¬è©¦
â””â”€â”€ docs/                            # é–‹ç™¼è¦åŠƒæ–‡ä»¶
    â”œâ”€â”€ PRD.md
    â”œâ”€â”€ Full-User-Story-List.md
    â””â”€â”€ Phase-X.md
```

---

## å…­ã€æª¢æŸ¥æ¸…å–®

### é–‹ç™¼å‰
- [ ] PRD å·²å»ºç«‹
- [ ] User Story BDD åŒ–å®Œæˆ
- [ ] Phase/Sprint å·²è¦åŠƒ

### é–‹ç™¼ä¸­
- [ ] Feature åˆ†æ”¯å·²å»ºç«‹
- [ ] spec.md / plan.md / tasks.md å·²ç”Ÿæˆ
- [ ] ç¨‹å¼ç¢¼èˆ‡æ¸¬è©¦å®Œæˆ

### çµ±åˆå‰
- [ ] äººé¡å·²æŒ‡å®š Feature ç›®éŒ„
- [ ] Unify Flow å·²åŸ·è¡Œ
- [ ] `/speckit.analyze` é€šé

### åˆä½µå¾Œ
- [ ] System Spec å·²æ›´æ–°
- [ ] Feature å·²å°å­˜è‡³ history
- [ ] main åˆ†æ”¯ç„¡æœªæ•´åˆçš„ Feature

---

## ä¸ƒã€å¸¸è¦‹å•é¡Œ

### Q1ï¼šFeature å¯ä»¥åªåš PRD ä¸€éƒ¨åˆ†å—ï¼Ÿ
**å¯ä»¥**ï¼Œé€™æ˜¯æ¨è–¦åšæ³•ã€‚æ¯æ¬¡ Feature å¯¦ä½œä¸€å°éƒ¨åˆ†ï¼Œå®Œæˆå¾Œ Unify Flowã€‚

### Q2ï¼šFeature é–‹ç™¼ä¸­é€”éœ€è¦åˆ‡æ›ä»»å‹™ï¼Ÿ
**ä¸å»ºè­°ä¸­æ–·**ã€‚è‹¥å¿…é ˆåˆ‡æ›ï¼š
```bash
git stash  # æˆ– commit WIP
git switch main
```

### Q3ï¼šUnify Flow å¤±æ•—æ€éº¼è¾¦ï¼Ÿ
1. ç¢ºèªå·²æŒ‡å®š Feature ç›®éŒ„
2. ç¢ºèª Feature ç›®éŒ„æœ‰å®Œæ•´çš„ spec/plan/tasks
3. åŸ·è¡Œ `/speckit.analyze` æª¢æŸ¥ä¸€è‡´æ€§

---

**Changelog**:
- v2.0.0 (2025-12-16): é‡æ§‹æ–‡ä»¶çµæ§‹ï¼Œæå‡å¯è®€æ€§ï¼›ä¾‹å¤–æƒ…å¢ƒæ•´åˆç‚ºç¨ç«‹ç« ç¯€
- v1.3.0 (2025-12-16): æ–°å¢ Debug åŸå‰‡ã€ä¸­é€”æ”¹è¦æ ¼ã€main Bug ä¿®å¾©
- v1.2.0 (2025-12-15): æ–°å¢ Sprint æ‹†åˆ†æ©Ÿåˆ¶
- v1.0.0 (2025-12-03): åˆç‰ˆå»ºç«‹
