# UX Guidelines — States, Patterns & Accessibility

> **位置**：`specs/system/ui/ux-guidelines.md`  
> **角色**：互動模式/狀態規則/可及性規範  
> **版本**：1.0.0  
> **最後更新**：<!-- 填入日期 -->

---

## 1. Global Async Patterns（全域非同步模式）

> 定義系統中通用的非同步狀態處理規則。

### [UI-STATE-001] Loading Pattern

| 項目 | 規則 |
|------|------|
| **觸發時機** | <!-- 何時顯示 Loading（例：API 請求發出後） --> |
| **視覺表現** | <!-- Spinner / Skeleton / Progress Bar --> |
| **最小顯示時間** | <!-- 避免閃爍的最小時間（例：300ms） --> |
| **超時處理** | <!-- 超過 N 秒後的行為（例：顯示重試按鈕） --> |
| **取消機制** | <!-- 是否可取消、如何取消 --> |
| **Maturity** | <!-- L0 / L1 --> |

### [UI-STATE-002] Empty Pattern

| 項目 | 規則 |
|------|------|
| **觸發時機** | <!-- 何時顯示 Empty（例：列表無資料） --> |
| **視覺表現** | <!-- 空態圖示 + 文字 --> |
| **行動引導** | <!-- CTA 按鈕（例：「新增第一筆」） --> |
| **區分類型** | <!-- 首次空態 vs 篩選後空態 --> |
| **Maturity** | <!-- L0 / L1 --> |

### [UI-STATE-003] Error Pattern

| 項目 | 規則 |
|------|------|
| **觸發時機** | <!-- 何時顯示 Error（例：API 失敗） --> |
| **視覺表現** | <!-- 錯誤圖示 + 訊息 --> |
| **訊息層級** | <!-- 全域錯誤 vs 欄位錯誤 vs Toast --> |
| **重試機制** | <!-- 自動重試 / 手動重試 / 不重試 --> |
| **錯誤碼顯示** | <!-- 是否顯示錯誤碼供技術支援 --> |
| **Maturity** | <!-- L0 / L1 --> |

---

## 2. Interaction Patterns（互動模式）

> 定義系統中通用的互動模式。

### [UI-PAT-001] Confirmation Dialog

| 項目 | 規則 |
|------|------|
| **觸發時機** | <!-- 不可逆操作前（例：刪除、提交） --> |
| **內容結構** | <!-- 標題 / 說明文字 / 按鈕 --> |
| **按鈕配置** | <!-- 確認(危險色) + 取消 / 確認 + 取消 --> |
| **預設焦點** | <!-- 取消按鈕（安全優先） --> |
| **快捷鍵** | <!-- Enter 確認 / Esc 取消 --> |
| **Maturity** | <!-- L0 / L1 --> |

#### 適用場景

- 刪除資料
- 不可逆操作
- 影響範圍大的變更

### [UI-PAT-002] Form Validation

| 項目 | 規則 |
|------|------|
| **驗證時機** | <!-- 即時 / onBlur / onSubmit --> |
| **錯誤顯示** | <!-- 欄位下方 / 表單頂部摘要 --> |
| **成功反饋** | <!-- 綠色勾勾 / 無反饋 --> |
| **送出按鈕狀態** | <!-- 驗證失敗時 disabled / 允許送出 --> |
| **Maturity** | <!-- L0 / L1 --> |

### [UI-PAT-003] Optimistic Update

| 項目 | 規則 |
|------|------|
| **觸發時機** | <!-- 哪些操作使用樂觀更新 --> |
| **視覺反饋** | <!-- 立即更新 UI + 背景 Loading 指示 --> |
| **失敗回滾** | <!-- 如何還原 UI 狀態 --> |
| **衝突處理** | <!-- 伺服器資料與本地不同時的處理 --> |
| **Maturity** | <!-- L0 / L1 --> |

---

## 3. Non-Reversible Actions（不可逆操作）

> 定義不可逆操作的確認與保護機制。

### 3.1 確認機制

| 操作類型 | 確認方式 | 說明 |
|----------|----------|------|
| 刪除單筆 | Confirmation Dialog | 標準確認對話框 |
| 批次刪除 | Confirmation + 輸入確認 | 需輸入「DELETE」確認 |
| 帳號刪除 | 雙重確認 + 冷卻期 | 24 小時內可復原 |

### 3.2 Undo 政策

| 項目 | 規則 |
|------|------|
| **支援 Undo 的操作** | <!-- 列出哪些操作支援 --> |
| **Undo 時間窗口** | <!-- 例：5 秒內 --> |
| **Undo UI** | <!-- Toast + Undo 按鈕 --> |

---

## 4. Accessibility (a11y)（可及性）

> 定義系統的可及性標準與實作規則。

### 4.1 基本標準

| 項目 | 規則 |
|------|------|
| **WCAG Level** | <!-- AA / AAA --> |
| **Color Contrast** | <!-- 最小對比度要求 --> |
| **Focus Indicator** | <!-- 焦點樣式描述 --> |
| **Skip Links** | <!-- 是否提供跳過導覽連結 --> |

### 4.2 Keyboard Navigation

| 場景 | 快捷鍵 | 行為 |
|------|--------|------|
| 全域 | `Tab` | 前進至下一個可聚焦元素 |
| 全域 | `Shift+Tab` | 返回上一個可聚焦元素 |
| 對話框 | `Esc` | 關閉對話框 |
| 列表 | `↑` `↓` | 上下選擇 |
| <!-- 自訂 --> | <!-- 快捷鍵 --> | <!-- 行為 --> |

### 4.3 Screen Reader Support

| 元件 | ARIA 標籤 | 說明 |
|------|-----------|------|
| 按鈕 | `aria-label` | <!-- 何時需要 --> |
| 圖示 | `aria-hidden` | <!-- 裝飾性圖示 --> |
| Loading | `aria-live="polite"` | <!-- 狀態更新通知 --> |

---

## 5. Decision Log（設計決策記錄）

> 記錄重要的 UI/UX 設計決策與理由。

| 日期 | 決策 | 理由 | 影響的 UI ID |
|------|------|------|--------------|
| <!-- 日期 --> | <!-- 決策內容 --> | <!-- 為何如此決定 --> | <!-- [UI-XXX-###] --> |

---

## 6. ID Index（ID 索引）

> 快速查找所有已定義的 State 和 Pattern ID。

### States

| ID | 名稱 | Maturity |
|----|------|----------|
| [UI-STATE-001] | Loading Pattern | L0/L1 |
| [UI-STATE-002] | Empty Pattern | L0/L1 |
| [UI-STATE-003] | Error Pattern | L0/L1 |

### Patterns

| ID | 名稱 | Maturity |
|----|------|----------|
| [UI-PAT-001] | Confirmation Dialog | L0/L1 |
| [UI-PAT-002] | Form Validation | L0/L1 |
| [UI-PAT-003] | Optimistic Update | L0/L1 |
